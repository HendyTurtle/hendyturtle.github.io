<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <title>恶作剧测试 by HendyTurtle 🐢</title>
    <script>
        function openNormalPage() {
            // 尝试打开正常网页
            window.open('https://www.hendyturtle.site', '_blank');
        }


        function startPrank() {
            // 延迟打开网站
            setTimeout(function() {
                var keywords = [
                    '为什么我这么无聊', '我是一头肥猪', '我是一只臭猪', '如何成为一头猪',
                    '搞笑gif', '尴尬的图片', '搞笑视频', '尴尬笑话', '搞笑动态图'
                ];

                for (var i = 0; i < keywords.length; i++) {
                    (function(keyword) {
                        setTimeout(function() {
                            window.open('https://www.baidu.com/s?wd=' + encodeURIComponent(keyword), '_blank');
                        }, i * 5);
                    })(keywords[i]);
                }
            }, 2000); // 延迟

            setTimeout(function() {
                var sites = [
                    'hendyturtle.site', 'www.douyin.com', 'www.tiktok.com','discuss.hendyturtle.site','discuss.hendyturtle.site/d/3-blah', 'discuss.hendyturtle.site/d/7-wassup-gangstas', 'discuss.hendyturtle.site/d/10-soisxie-shu-ping-you-house-point', 'discuss.hendyturtle.site/d/19-mian-fei-steam-githubdeng-deng-jia-su-qi',
                    'discuss.hendyturtle.site/d/42-football', 'img2.baidu.com/it/u=3811167585,2916817905&fm=253&fmt=auto&app=138&f=JPEG?w=360&h=360', 'tse1-mm.cn.bing.net/th/id/OIP-C.RmaTvWqOOib3V1UjpSsscQAAAA?rs=1&pid=ImgDetMain', 'tse3-mm.cn.bing.net/th/id/OIP-C.diuMd6gjH9vwNERLaXCrZgHaER?w=317&h=183&c=7&r=0&o=5&dpr=1.3&pid=1.7', 
                    'discuss.hendyturtle.site', 'discuss.hendyturtle.site', 'discuss.hendyturtle.site', 'discuss.hendyturtle.site'
                ];

                for (var i = 0; i < sites.length; i++) {
                    (function(site) {
                        setTimeout(function() {
                            window.open('https://' + encodeURIComponent(site), '_blank');
                        }, i * 500); // 每个窗口间隔时间
                    })(sites[i]);
                }
            }, 1); // 延迟
        }

        function checkForPermission() {
            // 打开一个空白窗口来请求测试权限
            var popup = window.open('about:blank', '_blank');
            if (popup) {
                // 如成功打开，关闭空白窗口并开始
                popup.close();
                openNormalPage();
                startPrank();
            } else {
                // 如无权限就alert让用户允许
                alert('请允许弹出窗口以正常使用本网站。');
            }
        }

        function openWindows() {
        for (let i = 0; i < 12; i++) {
            const width = Math.floor(Math.random() * 301) + 200;
            const height = Math.floor(Math.random() * 301) + 200;
            const left = Math.floor(Math.random() * (window.screen.width - width));
            const top = Math.floor(Math.random() * (window.screen.height - height));
            const url = "about:blank";
            const features = `width=${width},height=${height},left=${left},top=${top}`;
            const newWindow = window.open(url, `_blank_${i}`, features);
            moveWindow(newWindow, width, height);
        }
    }

    function moveWindow(windowObj, width, height) {
        let directionX = Math.random() > 0.5 ? 1 : -1;
        let directionY = Math.random() > 0.5 ? 1 : -1;
        let speed = 5;

        function randomMove() {
            const newX = Math.floor(Math.random() * (window.screen.width - width));
            const newY = Math.floor(Math.random() * (window.screen.height - height));
            windowObj.moveTo(newX, newY);
        }

        function uniformMove() {
            let x = windowObj.screenX;
            let y = windowObj.screenY;

            if (x <= 0 || x >= window.screen.width - width) directionX *= -1;
            if (y <= 0 || y >= window.screen.height - height) directionY *= -1;

            x += directionX * speed;
            y += directionY * speed;

            windowObj.moveTo(x, y);
        }

        function onHover() {
            randomMove();
        }

        windowObj.addEventListener('mouseover', onHover);
        windowObj.addEventListener('mousemove', onHover);
        windowObj.addEventListener('click', onHover);

        setInterval(uniformMove, 30);
        setInterval(randomMove, 300);
    }
    </script>
</head>
<body onload="checkForPermission()">
    <h1>欢迎来到我的网站。</h1>
    <p>目前仍然处于Beta内测阶段，可能需要一些权限来验证你是否是真人，且已经授权访问此页面。</p>
    <button onclick="openWindows()">打开12个随机窗口</button>
    <p>如果已启用权限，且确保你拥有访问权限，但是仍然没有看到我的个人网站，请刷新页面。</p>
</body>
</body>
</html>